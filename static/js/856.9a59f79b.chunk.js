"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[856],{7856:(s,e,t)=>{t.r(e),t.d(e,{default:()=>Y});var o=t(5043),r=t(5107),a=t(3003),i=t(1688),l=t(3923);const p="MyPost_post_block__h46yV",d="MyPost_post__o2m+Q",n="MyPost_post_text__S04eq";var u=t(6962),h=t(3990),f=t(3711),c=t(2397),_=t(2243),m=t(579);const P=s=>(0,m.jsxs)("div",{className:p,children:[(0,m.jsxs)("div",{className:d,children:[(0,m.jsx)(u.A,{src:s.photo,alt:"\u0410\u0432\u0430\u0442\u0430\u0440\u043a\u0430"}),(0,m.jsx)(h.A,{control:(0,m.jsx)(f.A,{icon:(0,m.jsx)(c.A,{}),checkedIcon:(0,m.jsx)(_.A,{}),name:"checkedH"}),label:s.like})]}),(0,m.jsx)("div",{className:n,children:s.message})]}),x="MyPosts_posts_form__CVZd9",j="MyPosts_posts__sid0u",v="MyPosts_posts_item__N-s8+",y="MyPosts_button_block__0GGi2",A="MyPosts_posts_textarea__EFf3S",g="MyPosts_button_size__M5Xh9";var N=t(5963),S=t(3842),b=t(8779),k=t(1383),I=t(9781);const M=b.A.maxLengthCreator(40),w=o.memo((s=>{let{posts:e,addPost:t,isAuth:o,photo:r}=s,a=e.map((s=>(0,m.jsx)(P,{id:s.id,message:s.message,like:s.like,photo:r},s.id)));return o?(0,m.jsxs)("div",{className:j,children:[(0,m.jsx)(z,{onSubmit:s=>{t(s.newPostText)}}),(0,m.jsx)("div",{className:v,children:a})]}):(0,m.jsx)(i.rd,{to:"/login"})})),z=(0,S.A)({form:"newPostText"})((s=>(0,m.jsx)("form",{onSubmit:s.handleSubmit,children:(0,m.jsxs)("div",{className:x,children:[(0,m.jsx)(N.A,{component:k.TM,name:"newPostText",placeholder:"Empty",className:A,validate:[b.A.requiredField,M]}),(0,m.jsx)("div",{className:y,children:(0,m.jsx)(I.$,{style:g,children:"Add post"})})]})}))),C=w,U=(0,a.Ng)((s=>{var e;return{posts:s.profilePage.posts,isAuth:s.auth.userData.isAuth,photo:null===(e=s.profilePage.profile)||void 0===e?void 0:e.photos.small}}),{addPost:r.Ay.addPost})(C),D="ProfileInfo_profile__d2txi",H="ProfileInfo_profile_info__4ywHt",O="ProfileInfo_avatar__Kdoz-",T="ProfileInfo_button_block__G+ezY",F="ProfileInfo_profile_info_button__KPZVm";var G=t(6663),K=t(8308),V=t(1317);const Z=s=>{let{isOwner:e,profile:t,status:r,updateStatus:a,savePhoto:i,updateProfile:l}=s,[p,d]=(0,o.useState)(!1);return t?(0,m.jsxs)("div",{className:D,children:[(0,m.jsxs)("div",{className:H,children:[(0,m.jsx)("div",{className:O,children:(0,m.jsx)("img",{src:t.photos.large||K,alt:"user avatar"})}),(0,m.jsx)("div",{className:T,children:(0,m.jsx)(I.$,{style:F,children:"Follow"})})]}),(0,m.jsx)(V.Q,{profile:t,status:r,updateStatus:a})]}):(0,m.jsx)(G.A,{})},q="Profile_mainContent__XYjK2",E=s=>{let{isOwner:e,profile:t,status:o,updateStatus:r,savePhoto:a,updateProfile:i,refreshProfile:l}=s;return(0,m.jsxs)("main",{className:q,children:[(0,m.jsx)(Z,{isOwner:e,profile:t,status:o,updateStatus:r,savePhoto:a,updateProfile:i,refreshProfile:l}),(0,m.jsx)(U,{})]})};var Q=t(5751);class X extends o.Component{refreshProfile(){let s=this.props.match.params.userId;s||(s=this.props.authorizedUserId,s||this.props.history.push("/login")),this.props.getUserProfile(s),this.props.getStatus(s)}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e,t){this.props.match.params.userId!==s.match.params.userId&&this.refreshProfile()}render(){return(0,m.jsx)(E,{...this.props,isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,updateProfile:this.props.updateProfile,refreshProfile:this.refreshProfile})}}const Y=(0,l.Zz)(i.y,Q.H,(0,a.Ng)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userData.id})),{getUserProfile:r.Ay.getUserProfile,updateProfile:r.Ay.updateProfile,getStatus:r.Ay.getStatus,updateStatus:r.Ay.updateStatus,savePhoto:r.Ay.savePhoto}))(X)},5751:(s,e,t)=>{t.d(e,{H:()=>l});t(5043);var o=t(3003),r=t(1688),a=t(579);const i=(0,o.Ng)((s=>({isAuth:s.auth.userData.isAuth})));function l(s){return i((e=>{const{isAuth:t,...o}=e;return t?(0,a.jsx)(s,{...e}):(0,a.jsx)(r.rd,{to:"/login"})}))}}}]);
//# sourceMappingURL=856.9a59f79b.chunk.js.map